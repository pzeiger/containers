machine_name: workstation
#container_type: apptainer
container_type: docker
base_image: rocm/pytorch:rocm7.1_ubuntu24.04_py3.12_pytorch_release_2.8.0

# Build arguments
build_args:
  maintainer: paul.zeiger@physics.uu.se
  description: "Container for workstation use with ROCm support"

# Permanent environment variables
environment_vars:

# Variables for installation
install_vars:
  install_prefix: '/opt/software'
  rocm_arch: 'gfx1151'
  build_flags_c: "-O3 -march=native -mtune=native -mfma -mavx2"
  build_flags_f: "-O3 -march=native -mtune=native -mfma -mavx2"
  build_flags_cxx: "-O3 -march=native -mtune=native -mfma -mavx2"
  

# Software modules to install
modules:
  - name: base_workstation
    enabled: true
  
  - name: python
    version: '3.12'
    enabled: true
  
  - name: libxc
    version: '7.0.0'
    enabled: true
  
  - name: libvdwxc
    version: '0.5.0'
    enabled: True

  - name: cupy_rocm
    version: '13.6.0'
    enabled: true

  - name: abtem
    version: 'git'
    enabled: true
  
  - name: gpaw
    version: '25.7.0'
    enabled: true
  
  - name: python-packages
    enabled: true
  
  - name: cleanup
    enabled: true
